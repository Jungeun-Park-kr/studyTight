<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyTight</title>
    <script src="/user/users.js"></script>
    <script src="/login/login.js"></script>
    <script src="/timetable/timetable_main.js"></script>
    <script src="/timetable/timetable_edit.js"></script>
    <script src="/timetable/timetable_add.js"></script>
    <style>
        @import url(/timetable/timetable_main.css);
        @import url(/timetable/timetable_edit.css);
        @import url(/mainframe.css);
    </style>
</head>
<body>
    <div id="wrap_edit">
        <div class="page-menu">
            <div class ="logo_area"> 
                <img src="/media/logo.png" class= logo onclick="btnHome();">
            </div>
            <ul class="left-menus">
                <li class="menu_home" onclick="btnHome();">
                    <img src="/media/home.png" >&nbsp내 공부방</img>
                </li>
                <li class="menu_contact" onclick="btnContact();">
                    <img src="/media/contact-book.png" >&nbsp방명록</img>
                </li>
                <li class="menu_timetable" onclick="btnTimetable();">
                    <img src="/media/timetable.png" >&nbsp시간표</img>
                </li>
                <li class="menu_dday" onclick="btnDday();">
                    <img src="/media/d-day.png" >&nbsp디데이</img>
                </li>
            </ul>
        </div>
        <div class="page-header" role="banner" class>
            <div class="timetable_title">시간표 관리</div>
        </div>
        
        <div class="section">
            <!-- 여기는 본문 들어갈 메인 섹션 -->
            <div class="background-box">
                <div class="timetable_edit_header">
                    <div class="title_msg">전체 수강중인 과목</div>
                    <div class="btn_add_course">
                        <input type ="button" value="+ 과목 추가하기" onclick="showTimetableAddPopup();"></input>
                        
                    </div>
                    
                </div>
                <hr id ="timetable-line">
                <div class="timetable_edit_section">
                    <!-- 여기에 본격적인 내용 -->
                    <div class ="course_list">
                        <table id = "course_table" style="table-layout:fixed; word-break:break-all;">
                            <thead><tr><th style='width:20%'>과목명</th style='width:30%'><th>시간</th><th style='width:20%'>강의 방식</th><th style='width:10%'>교수명</th><th  style='width:10%' class="modi">수정</th><th class="del" style='width:10%'>삭제</th></tr></tbody>
                            <tbody id = "course_table_body">
                                <!-- <tr><td>OS(운영체제)</td><td>목요일 10:30 - 11:45</td><td>온라인 실시간</td><td>김철홍</td>
                                    <td><input type="button" class="btn_modify_course" onclick="modifyCourse('+c1+');"/></td>
                                    <td><input type="button" class="btn_delete_course" onclick="deleteCourse('+c1+');" style="width:32px"/></td>
                                </tr>
                                <tr><td>웹프로그래밍기초및실습</td><td>월요일 13:00 - 14:45</td><td>온라인 동영상</td><td>최지웅</td>
                                    <td><input type="button" class="btn_modify_course" onclick="modifyCourse('+c2+');"/></td>
                                    <td><input type="button" class="btn_delete_course" onclick="deleteCourse('+c2+');"/></td>
                                </tr>
                                <tr><td>데이터베이스</td><td>수요일 13:30 - 14:45 </td><td>온라인 동영상</td><td>박동주</td>
                                    <td><input type="button" class="btn_modify_course" onclick="modifyCourse('+c2+');"/></td>
                                    <td><input type="button" class="btn_delete_course" onclick="deleteCourse('+c2+');"/></td>
                                </tr>
                                <tr><td>웹프로그래밍설계및실습</td><td>화요일 12:00 - 13:50</td><td>온라인 동영상</td><td>송현주</td>
                                    <td><input type="button" class="btn_modify_course" onclick="modifyCourse('+c2+');"/></td>
                                    <td><input type="button" class="btn_delete_course" onclick="deleteCourse('+c2+');"/></td>
                                </tr>
                                <tr><td>철학으로만나는기독교</td><td>수요일 16:30 - 17:45</td><td>온라인 동영상</td><td>성신형</td>
                                    <td><input type="button" class="btn_modify_course" onclick="modifyCourse('+c2+');"/></td>
                                    <td><input type="button" class="btn_delete_course" onclick="deleteCourse('+c2+');"/></td>
                                </tr> -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <script>
                    var username = localStorage.getItem('username'); //현재 로그인된 사용자 이름 가져오기
                    activeUser = getActiveUser(username);  //사용자 이름으로 activeUser의 정보 가져와서 프로필 상태로 띄워줌
                    getCourses(activeUser.course); //course 리스트에 있는 과목들 출력해주기

                    // var edit = document.getElementsByClassName('btn_modify_course');
                    // for (var i=0; i<edit.length; i++) {
                    //     edit[i].addEventListener('click', function() {
                    //     })
                    // }
                    var target = document.getElementsByClassName('btn_delete_course');
                    for (var i=0; i<target.length; i++) {
                        target[i].addEventListener('click', function() { //삭제 버튼 리스너 추가
                            var ret = confirm("정말로 삭제하시겠습니까?");
                            if (ret) { //삭제 수행
                                var parent = document.getElementById('course_table_body');
                                parent.removeChild(this.parentElement.parentElement);
                            }else { //취소버튼 or 다이얼로그 닫은 경우
                                ;
                            }
                        })
                    }
                </script>
            </div>
        </div>    
        <div class="aside">
            <!-- 여기는 aisde(우측 로그인, 오늘할일) -->
            <div class="aside_wrap">
                <div class="login">
                    <div class="login_white_box">
                        <div class="profile_section">
                            <div class="logout">
                                <input type="button" class="btn_logout" title="로그아웃" value="로그아웃" onclick="logout();" />
                            </div>
                            <div class="profile">
                                <!-- 이미지 클릭시 프로필 관리 화면으로 가는것도 좋을듯 -->
                                <img id="activeUserimg" src="/media/user.png" onclick="location.href='#프로필수정화면'">
                                <div class="username" id="activeUsername">박혁거세님</div>
                                <script>
                                    var username = localStorage.getItem('username'); //현재 로그인된 사용자 이름 가져오기
                                    activeUser = getActiveUser(username);  //사용자 이름으로 activeUser의 정보 가져와서 프로필 상태로 띄워줌
                                    // doc.getElementById('activeUsername').innerHTML = username + '님';
                                    doc.getElementById('activeUsername').innerHTML = activeUser.name + '님';
                                    doc.getElementById('activeUserimg').src = activeUser.userImage;
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="today">
                    <p>오늘 할 일</p>
                    <div class="todaylist">
                        <label><p><input type="checkbox">웹프로그래밍 수업 듣기</p></label>
                        <label><p><input type="checkbox">DB 강의 듣기</p></label>
                        <label><p><input type="checkbox">채플 듣기</p></label>
                        <label><p><input type="checkbox">OS 보고서 쓰기</p></label>
                    </div>
                    <input type="button" class="btnplusTodo" value="+ 할 일 추가하기" onclick="plusTodo();"></input>
                    <!--+부분 이미지로 넣기-->
                </div>
            </div>
        </div>
    </div>
</body>
</html>